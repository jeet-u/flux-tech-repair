/* Theme transition animation - gradient sweep effect */

/* Gradient mask sweeps from left to right */
@keyframes gradient-sweep {
  from {
    mask-position: 100% 0;
  }
  to {
    mask-position: 0 0;
  }
}

/* Keep transition group height to viewport; large heights are expensive */
html.theme-transition::view-transition-group(root) {
  height: 100dvh;
  overflow: clip;
}

html.theme-transition::view-transition-image-pair(root) {
  isolation: isolate;
  height: 100dvh;
}

/* Old theme stays static */
html.theme-transition::view-transition-old(root) {
  animation: none;
  z-index: 0;
  height: 100%;
  object-fit: cover;
  object-position: left top;
}

/* New theme revealed left-to-right via gradient mask */
html.theme-transition::view-transition-new(root) {
  mask-image: linear-gradient(to right, black 40%, transparent 60%);
  mask-size: 300% 100%;
  animation: gradient-sweep 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  z-index: 1;
  height: 100%;
  object-fit: cover;
  object-position: left top;
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  html.theme-transition::view-transition-new(root),
  html.theme-transition::view-transition-old(root) {
    animation: none;
  }
}

/* Keep default view transitions; apply special effects only with theme-transition class */
::view-transition-new(root) {
  z-index: 1;
}

::view-transition-old(root) {
  z-index: 0;
}

html.dark .astro-code,
html.dark .astro-code span {
  /* biome-ignore lint/complexity/noImportantStyles: Safe - Shiki code blocks */
  color: var(--shiki-dark) !important;
  /* biome-ignore lint/complexity/noImportantStyles: Safe - Shiki code blocks */
  background-color: var(--shiki-dark-bg) !important;
  /* Optional, if you also want font styles */
  /* font-style: var(--shiki-dark-font-style) !important; */
  /* biome-ignore lint/complexity/noImportantStyles: Safe - Shiki code blocks */
  font-weight: var(--shiki-dark-font-weight) !important;
  /* biome-ignore lint/complexity/noImportantStyles: Safe - Shiki code blocks */
  text-decoration: var(--shiki-dark-text-decoration) !important;
}
